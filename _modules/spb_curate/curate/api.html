

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>spb_curate.curate.api &mdash; superb-ai-curate 1.0.0b1 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> superb-ai-curate
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0b1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../intro/overview.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../intro/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../intro/tutorial.html">Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../source/modules.html">spb_curate</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">superb-ai-curate</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>spb_curate.curate.api</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for spb_curate.curate.api</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Iterator</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Union</span>

<span class="kn">import</span> <span class="nn">requests</span>

<span class="kn">from</span> <span class="nn">spb_curate</span> <span class="kn">import</span> <span class="n">api_requestor</span><span class="p">,</span> <span class="n">error</span><span class="p">,</span> <span class="n">util</span>
<span class="kn">from</span> <span class="nn">spb_curate.abstract.api.resource</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">CreateResource</span><span class="p">,</span>
    <span class="n">DeleteResource</span><span class="p">,</span>
    <span class="n">ModifyResource</span><span class="p">,</span>
    <span class="n">PaginateResource</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">spb_curate.abstract.superb_ai_object</span> <span class="kn">import</span> <span class="n">SuperbAIObject</span>
<span class="kn">from</span> <span class="nn">spb_curate.curate.model.annotation_types</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">AnnotationType</span><span class="p">,</span>
    <span class="n">BoundingBox</span><span class="p">,</span>
    <span class="n">Category</span><span class="p">,</span>
    <span class="n">Cuboid2D</span><span class="p">,</span>
    <span class="n">Keypoints</span><span class="p">,</span>
    <span class="n">Polygon</span><span class="p">,</span>
    <span class="n">Polyline</span><span class="p">,</span>
    <span class="n">RotatedBox</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">FETCH_PAGE_LIMIT</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">UPLOAD_IMAGE_FILE_BYTES_MAX</span> <span class="o">=</span> <span class="mi">20000000</span>  <span class="c1"># 20MB</span>


<div class="viewcode-block" id="Annotation"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Annotation">[docs]</a><span class="k">class</span> <span class="nc">Annotation</span><span class="p">(</span><span class="n">CreateResource</span><span class="p">,</span> <span class="n">DeleteResource</span><span class="p">,</span> <span class="n">ModifyResource</span><span class="p">):</span>
    <span class="n">_discriminator_map</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;annotation_value&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;annotation_type&quot;</span><span class="p">,</span>
            <span class="p">{</span>
                <span class="s2">&quot;box&quot;</span><span class="p">:</span> <span class="n">BoundingBox</span><span class="p">,</span>
                <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="n">Category</span><span class="p">,</span>
                <span class="s2">&quot;cuboid2d&quot;</span><span class="p">:</span> <span class="n">Cuboid2D</span><span class="p">,</span>
                <span class="s2">&quot;keypoint&quot;</span><span class="p">:</span> <span class="n">Keypoints</span><span class="p">,</span>
                <span class="s2">&quot;polygon&quot;</span><span class="p">:</span> <span class="n">Polygon</span><span class="p">,</span>
                <span class="s2">&quot;polyline&quot;</span><span class="p">:</span> <span class="n">Polyline</span><span class="p">,</span>
                <span class="s2">&quot;rbox&quot;</span><span class="p">:</span> <span class="n">RotatedBox</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">)</span>
    <span class="p">}</span>
    <span class="n">_endpoints</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;create&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/dataset-core/datasets/</span><span class="si">{dataset_id}</span><span class="s2">/images/</span><span class="si">{image_id}</span><span class="s2">/annotations/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;delete&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/dataset-core/datasets/</span><span class="si">{dataset_id}</span><span class="s2">/annotations/</span><span class="si">{id}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fetch&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/dataset-query/datasets/</span><span class="si">{dataset_id}</span><span class="s2">/images/</span><span class="si">{image_id}</span><span class="s2">/annotations/</span><span class="si">{id}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="s2">&quot;modify&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/dataset-core/datasets/</span><span class="si">{dataset_id}</span><span class="s2">/annotations/</span><span class="si">{id}</span><span class="s2">/metadata&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">_field_initializers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;annotation_value&quot;</span><span class="p">:</span> <span class="s2">&quot;_init_annotation_value&quot;</span><span class="p">}</span>
    <span class="n">_object_type</span> <span class="o">=</span> <span class="s2">&quot;annotation&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">image_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">image_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">annotation_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">annotation_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">annotation_value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span>
            <span class="n">BoundingBox</span><span class="p">,</span>
            <span class="n">Category</span><span class="p">,</span>
            <span class="n">Cuboid2D</span><span class="p">,</span>
            <span class="n">Keypoints</span><span class="p">,</span>
            <span class="n">Polygon</span><span class="p">,</span>
            <span class="n">Polyline</span><span class="p">,</span>
            <span class="n">RotatedBox</span><span class="p">,</span>
            <span class="nb">dict</span><span class="p">,</span>
            <span class="nb">list</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
        <span class="o">**</span><span class="n">params</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes an annotation.</span>
<span class="sd">        A newly initialized annotation is incomplete must be added to a dataset.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        image_id</span>
<span class="sd">            The ID of the image to add the annotation to.</span>
<span class="sd">            Must provide at least one of ``image_id`` or ``image_key``.</span>
<span class="sd">        image_key</span>
<span class="sd">            The key of the image to add the annotation to.</span>
<span class="sd">            Must provide at least one of ``image_id`` or ``image_key``.</span>
<span class="sd">        annotation_class</span>
<span class="sd">            The classification of the annotation (e.g. &quot;person&quot;, &quot;vehicle&quot;).</span>
<span class="sd">        annotation_type</span>
<span class="sd">            The type of the annotation (e.g. &quot;box&quot;, &quot;polygon&quot;).</span>
<span class="sd">            Will be inferred if ``annotation_value`` is an instance of ``AnnotationType``.</span>
<span class="sd">        annotation_value</span>
<span class="sd">            The value of the annotation.</span>
<span class="sd">        metadata</span>
<span class="sd">            The metadata associated with the annotation.</span>
<span class="sd">            Must be flat (one level deep).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Annotation</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">image_id</span><span class="o">=</span><span class="n">image_id</span><span class="p">,</span>
            <span class="n">image_key</span><span class="o">=</span><span class="n">image_key</span><span class="p">,</span>
            <span class="n">annotation_class</span><span class="o">=</span><span class="n">annotation_class</span><span class="p">,</span>
            <span class="n">annotation_type</span><span class="o">=</span><span class="n">annotation_value</span><span class="o">.</span><span class="n">_object_type</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">annotation_value</span><span class="p">,</span> <span class="n">AnnotationType</span><span class="p">)</span>
            <span class="k">else</span> <span class="n">annotation_type</span><span class="p">,</span>
            <span class="n">annotation_value</span><span class="o">=</span><span class="n">annotation_value</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
            <span class="o">**</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_init_volatile_fields</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">annotation_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">annotation_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">annotation_value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span>
            <span class="n">BoundingBox</span><span class="p">,</span>
            <span class="n">Category</span><span class="p">,</span>
            <span class="n">Cuboid2D</span><span class="p">,</span>
            <span class="n">Keypoints</span><span class="p">,</span>
            <span class="n">Polygon</span><span class="p">,</span>
            <span class="n">Polyline</span><span class="p">,</span>
            <span class="n">RotatedBox</span><span class="p">,</span>
            <span class="nb">dict</span><span class="p">,</span>
            <span class="nb">list</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
        <span class="n">image_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">image_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">params</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Annotation</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">_init_volatile_fields</span><span class="p">(</span>
            <span class="n">image_id</span><span class="o">=</span><span class="n">image_id</span><span class="p">,</span>
            <span class="n">image_key</span><span class="o">=</span><span class="n">image_key</span><span class="p">,</span>
            <span class="n">annotation_class</span><span class="o">=</span><span class="n">annotation_class</span><span class="p">,</span>
            <span class="n">annotation_type</span><span class="o">=</span><span class="n">annotation_type</span><span class="p">,</span>
            <span class="n">annotation_value</span><span class="o">=</span><span class="n">annotation_value</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
            <span class="o">**</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">is_required</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="p">([</span><span class="s2">&quot;image_id&quot;</span><span class="p">,</span> <span class="s2">&quot;image_key&quot;</span><span class="p">],</span> <span class="p">[</span><span class="n">image_id</span><span class="p">,</span> <span class="n">image_key</span><span class="p">],</span> <span class="kc">True</span><span class="p">),</span>
                <span class="p">(</span><span class="s2">&quot;annotation_class&quot;</span><span class="p">,</span> <span class="n">annotation_class</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
                <span class="p">(</span><span class="s2">&quot;annotation_type&quot;</span><span class="p">,</span> <span class="n">annotation_type</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
                <span class="p">(</span><span class="s2">&quot;annotation_value&quot;</span><span class="p">,</span> <span class="n">annotation_value</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
                <span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
            <span class="p">]</span>
        <span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">util</span><span class="o">.</span><span class="n">validate_argument_list</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">v</span><span class="p">,</span> <span class="n">is_required</span><span class="o">=</span><span class="n">is_required</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">paired_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">k</span><span class="p">)):</span>
                    <span class="bp">self</span><span class="p">[</span><span class="n">k</span><span class="p">[</span><span class="n">paired_i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">convert_to_superb_ai_object</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">v</span><span class="p">[</span><span class="n">paired_i</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">util</span><span class="o">.</span><span class="n">validate_argument_value</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">v</span><span class="p">,</span> <span class="n">is_required</span><span class="o">=</span><span class="n">is_required</span><span class="p">)</span>
                <span class="bp">self</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">convert_to_superb_ai_object</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">v</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">annotation_type</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">error</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;annotation_type is required&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">annotation_value</span><span class="p">,</span> <span class="p">(</span><span class="nb">dict</span><span class="p">,</span> <span class="nb">list</span><span class="p">))</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span>
            <span class="n">annotation_value</span><span class="p">,</span> <span class="n">AnnotationType</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_init_annotation_value</span><span class="p">(</span><span class="n">annotation_type</span><span class="p">,</span> <span class="n">annotation_value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_init_annotation_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">annotation_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">annotation_value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span>
            <span class="n">BoundingBox</span><span class="p">,</span>
            <span class="n">Category</span><span class="p">,</span>
            <span class="n">Cuboid2D</span><span class="p">,</span>
            <span class="n">Keypoints</span><span class="p">,</span>
            <span class="n">Polygon</span><span class="p">,</span>
            <span class="n">Polyline</span><span class="p">,</span>
            <span class="n">RotatedBox</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="o">**</span><span class="n">params</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="n">annotation_type_cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cls_by_discriminator</span><span class="p">(</span>
            <span class="n">field</span><span class="o">=</span><span class="s2">&quot;annotation_value&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;annotation_type&quot;</span><span class="p">:</span> <span class="n">annotation_type</span><span class="p">}</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">annotation_value</span> <span class="o">=</span> <span class="n">annotation_type_cls</span><span class="p">(</span><span class="n">raw_data</span><span class="o">=</span><span class="n">annotation_value</span><span class="p">)</span>

<div class="viewcode-block" id="Annotation.create"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Annotation.create">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">image_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">image_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">annotation_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">annotation_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">annotation_value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span>
            <span class="n">BoundingBox</span><span class="p">,</span>
            <span class="n">Cuboid2D</span><span class="p">,</span>
            <span class="n">Category</span><span class="p">,</span>
            <span class="n">Keypoints</span><span class="p">,</span>
            <span class="n">Polygon</span><span class="p">,</span>
            <span class="n">Polyline</span><span class="p">,</span>
            <span class="n">RotatedBox</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Annotation</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Not implemented.</span>
<span class="sd">        Annotations can be created by ``Annotation.create_bulk()`` or ``Dataset.add_annotations()``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Annotation.create_bulk"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Annotation.create_bulk">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_bulk</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">annotations</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Annotation</span><span class="p">],</span>
        <span class="n">asynchronous</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Job</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a job that adds newly initialized annotations to a dataset.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id</span>
<span class="sd">            The ID of the dataset to add the annotations to.</span>
<span class="sd">        annotations</span>
<span class="sd">            Newly initialized annotations to add.</span>
<span class="sd">        asynchronous</span>
<span class="sd">            Whether to immediately return the job after creating it.</span>
<span class="sd">            If set to ``False``, the function waits for the job to finish before returning.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The created job.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">dataset_id</span><span class="p">,</span>
            <span class="s2">&quot;annotations&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="p">}</span>

        <span class="c1"># Ensure the annotation_values are converted to &quot;raw&quot; form</span>
        <span class="k">for</span> <span class="n">annotation</span> <span class="ow">in</span> <span class="n">annotations</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;annotations&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">annotation</span><span class="o">.</span><span class="n">to_dict_deep</span><span class="p">())</span>

        <span class="n">job</span> <span class="o">=</span> <span class="n">Job</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">job_type</span><span class="o">=</span><span class="n">JobType</span><span class="o">.</span><span class="n">ANNOTATION_IMPORT</span><span class="p">,</span>
            <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">asynchronous</span><span class="p">:</span>
            <span class="n">job</span><span class="o">.</span><span class="n">wait_until_complete</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">job</span></div>

<div class="viewcode-block" id="Annotation.delete"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Annotation.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes the annotation.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpoint_params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset_id</span><span class="p">,</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">Annotation</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span> <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span> <span class="n">endpoint_params</span><span class="o">=</span><span class="n">endpoint_params</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Annotation.fetch"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Annotation.fetch">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">image_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Annotation</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches an annotation.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        id</span>
<span class="sd">            The ID of the annotation to fetch.</span>
<span class="sd">        dataset_id</span>
<span class="sd">            The ID of the dataset with the image to fetch the annotation from.</span>
<span class="sd">        image_id</span>
<span class="sd">            The ID of the image to fetch the annotation from.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The fetched annotation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpoint_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">id</span><span class="p">,</span> <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">dataset_id</span><span class="p">,</span> <span class="s2">&quot;image_id&quot;</span><span class="p">:</span> <span class="n">image_id</span><span class="p">}</span>

        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">Annotation</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span> <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span> <span class="n">endpoint_params</span><span class="o">=</span><span class="n">endpoint_params</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Annotation.refresh"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Annotation.refresh">[docs]</a>    <span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Refreshes the annotation.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpoint_params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset_id</span><span class="p">,</span>
            <span class="s2">&quot;image_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_id</span><span class="p">,</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">Annotation</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span> <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span> <span class="n">endpoint_params</span><span class="o">=</span><span class="n">endpoint_params</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Annotation.modify"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Annotation.modify">[docs]</a>    <span class="k">def</span> <span class="nf">modify</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Modifies the annotation.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        metadata</span>
<span class="sd">            The metadata associated with the annotation.</span>
<span class="sd">            Must be flat (one level deep).</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpoint_params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset_id</span><span class="p">,</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">metadata</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="n">metadata</span><span class="p">})</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">Annotation</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">endpoint_params</span><span class="o">=</span><span class="n">endpoint_params</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
            <span class="n">method</span><span class="o">=</span><span class="s2">&quot;put&quot;</span><span class="p">,</span>
        <span class="p">)</span></div></div>


<div class="viewcode-block" id="Dataset"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Dataset">[docs]</a><span class="k">class</span> <span class="nc">Dataset</span><span class="p">(</span><span class="n">CreateResource</span><span class="p">,</span> <span class="n">DeleteResource</span><span class="p">,</span> <span class="n">PaginateResource</span><span class="p">,</span> <span class="n">ModifyResource</span><span class="p">):</span>
    <span class="n">_endpoints</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;create&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/dataset-core/datasets/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;delete&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/dataset-core/datasets/</span><span class="si">{id}</span><span class="s2">/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fetch&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/dataset-query/datasets/</span><span class="si">{id}</span><span class="s2">/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;paginate&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/dataset-query/datasets/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;modify&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/dataset-core/datasets/</span><span class="si">{id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">_object_type</span> <span class="o">=</span> <span class="s2">&quot;dataset&quot;</span>

<div class="viewcode-block" id="Dataset.fetch"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Dataset.fetch">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_image_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">include_slice_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dataset</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches a dataset.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        id</span>
<span class="sd">            The id of the dataset to fetch.</span>
<span class="sd">            Must provide at least one of ``id`` or ``name``.</span>
<span class="sd">        name</span>
<span class="sd">            The name of the dataset to fetch.</span>
<span class="sd">            Must provide at least one of ``id`` or ``name``.</span>
<span class="sd">        include_image_count</span>
<span class="sd">            Whether to include the count of images in the fetched dataset.</span>
<span class="sd">        include_slice_count</span>
<span class="sd">            Whether to include the count of slices in the fetched dataset.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The fetched dataset.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">error</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;Must provide at least one of id or name.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">error</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;Must provide only one of id or name.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">fetch_all</span><span class="p">(</span>
                    <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
                    <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
                    <span class="n">exact</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">},</span>
                    <span class="n">include_image_count</span><span class="o">=</span><span class="n">include_image_count</span><span class="p">,</span>
                    <span class="n">include_slice_count</span><span class="o">=</span><span class="n">include_slice_count</span><span class="p">,</span>
                <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="c1"># TODO: Fix error message</span>
                <span class="k">raise</span> <span class="n">error</span><span class="o">.</span><span class="n">NotFoundError</span><span class="p">(</span><span class="s2">&quot;Could not find the dataset.&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="kc">None</span>

        <span class="n">endpoint_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">id</span><span class="p">}</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">include_image_count</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;expand&quot;</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;expand&quot;</span><span class="p">,</span> <span class="p">[])</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;image_count&quot;</span><span class="p">]})</span>

        <span class="k">if</span> <span class="n">include_slice_count</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;expand&quot;</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;expand&quot;</span><span class="p">,</span> <span class="p">[])</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;slice_count&quot;</span><span class="p">]})</span>

        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">Dataset</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">endpoint_params</span><span class="o">=</span><span class="n">endpoint_params</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Dataset.fetch_all"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Dataset.fetch_all">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch_all</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">exact</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">contains</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_image_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">include_slice_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dataset</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches datasets that match the provided filters.</span>
<span class="sd">        If filters are not provided, fetches all datasets.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        exact</span>
<span class="sd">            A dictionary for exact, case-sensitive filtering.</span>
<span class="sd">            Must provide field names as keys and their desired values.</span>
<span class="sd">            Supported fields: ``name``.</span>
<span class="sd">        contains</span>
<span class="sd">            A dictionary for partial, case-sensitive filtering.</span>
<span class="sd">            Must provide field names as keys and their desired values.</span>
<span class="sd">            Supported fields: ``name``.</span>
<span class="sd">        include_image_count</span>
<span class="sd">            Whether to include the count of images in the fetched datasets.</span>
<span class="sd">        include_slice_count</span>
<span class="sd">            Whether to include the count of slices in the fetched datasets.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            Matching datasets.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">all_datasets</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">fetch_page_iter</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">exact</span><span class="o">=</span><span class="n">exact</span><span class="p">,</span>
            <span class="n">contains</span><span class="o">=</span><span class="n">contains</span><span class="p">,</span>
            <span class="n">include_image_count</span><span class="o">=</span><span class="n">include_image_count</span><span class="p">,</span>
            <span class="n">include_slice_count</span><span class="o">=</span><span class="n">include_slice_count</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="n">all_datasets</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span> <span class="p">[]))</span>
        <span class="k">return</span> <span class="n">all_datasets</span></div>

<div class="viewcode-block" id="Dataset.fetch_all_iter"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Dataset.fetch_all_iter">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch_all_iter</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">exact</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">contains</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_image_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">include_slice_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Dataset</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterates through datasets that match the provided filters.</span>
<span class="sd">        If filters are not provided, iterates through all datasets.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        exact</span>
<span class="sd">            A dictionary for exact, case-sensitive filtering.</span>
<span class="sd">            Must provide field names as keys and their desired values.</span>
<span class="sd">            Supported fields: ``name``.</span>
<span class="sd">        contains</span>
<span class="sd">            A dictionary for partial, case-sensitive filtering.</span>
<span class="sd">            Must provide field names as keys and their desired values.</span>
<span class="sd">            Supported fields: ``name``.</span>
<span class="sd">        include_image_count</span>
<span class="sd">            Whether to include the count of images in the fetched datasets.</span>
<span class="sd">        include_slice_count</span>
<span class="sd">            Whether to include the count of slices in the fetched datasets.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The matching dataset iterator.</span>

<span class="sd">        Yields</span>
<span class="sd">        -------</span>
<span class="sd">            The next matching dataset.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">fetch_result</span> <span class="ow">in</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">fetch_page_iter</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">exact</span><span class="o">=</span><span class="n">exact</span><span class="p">,</span>
            <span class="n">contains</span><span class="o">=</span><span class="n">contains</span><span class="p">,</span>
            <span class="n">include_image_count</span><span class="o">=</span><span class="n">include_image_count</span><span class="p">,</span>
            <span class="n">include_slice_count</span><span class="o">=</span><span class="n">include_slice_count</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="k">for</span> <span class="n">dataset</span> <span class="ow">in</span> <span class="n">fetch_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span> <span class="p">[]):</span>
                <span class="k">yield</span> <span class="n">dataset</span></div>

<div class="viewcode-block" id="Dataset.fetch_page"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Dataset.fetch_page">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch_page</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">exact</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">contains</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_image_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">include_slice_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">page</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Dataset</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches a page of datasets that match the provided filters.</span>
<span class="sd">        If filters are not provided, paginates all datasets.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        exact</span>
<span class="sd">            A dictionary for exact, case-sensitive filtering.</span>
<span class="sd">            Must provide field names as keys and their desired values.</span>
<span class="sd">            Supported fields: ``name``.</span>
<span class="sd">        contains</span>
<span class="sd">            A dictionary for partial, case-sensitive filtering.</span>
<span class="sd">            Must provide field names as keys and their desired values.</span>
<span class="sd">            Supported fields: ``name``.</span>
<span class="sd">        include_image_count</span>
<span class="sd">            Whether to include the count of images in the fetched datasets.</span>
<span class="sd">        include_slice_count</span>
<span class="sd">            Whether to include the count of slices in the fetched datasets.</span>
<span class="sd">        page</span>
<span class="sd">            The page number.</span>
<span class="sd">        limit</span>
<span class="sd">            The maximum number of datasets in a page.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            A page of matching datasets.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="n">limit</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">exact</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">field</span><span class="p">,</span> <span class="nb">filter</span> <span class="ow">in</span> <span class="p">[</span>
                <span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">),</span>
            <span class="p">]:</span>
                <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="nb">filter</span><span class="p">:</span> <span class="n">exact</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field</span><span class="p">)})</span>

        <span class="k">if</span> <span class="n">contains</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">field</span><span class="p">,</span> <span class="nb">filter</span> <span class="ow">in</span> <span class="p">[</span>
                <span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;name_contains&quot;</span><span class="p">),</span>
            <span class="p">]:</span>
                <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="nb">filter</span><span class="p">:</span> <span class="n">contains</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field</span><span class="p">)})</span>

        <span class="k">if</span> <span class="n">include_image_count</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;expand&quot;</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;expand&quot;</span><span class="p">,</span> <span class="p">[])</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;image_count&quot;</span><span class="p">]})</span>

        <span class="k">if</span> <span class="n">include_slice_count</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;expand&quot;</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;expand&quot;</span><span class="p">,</span> <span class="p">[])</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;slice_count&quot;</span><span class="p">]})</span>

        <span class="k">if</span> <span class="n">page</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;page&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">page</span>

        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">Dataset</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span><span class="o">.</span><span class="n">fetch_page</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">endpoint_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Dataset.fetch_page_iter"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Dataset.fetch_page_iter">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch_page_iter</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">exact</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">contains</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_image_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">include_slice_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Dataset</span><span class="p">]]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterates through pages of datasets that match the provided filters.</span>
<span class="sd">        If filters are not provided, paginates all datasets.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        exact</span>
<span class="sd">            A dictionary for exact, case-sensitive filtering.</span>
<span class="sd">            Must provide field names as keys and their desired values.</span>
<span class="sd">            Supported fields: ``name``.</span>
<span class="sd">        contains</span>
<span class="sd">            A dictionary for partial, case-sensitive filtering.</span>
<span class="sd">            Must provide field names as keys and their desired values.</span>
<span class="sd">            Supported fields: ``name``.</span>
<span class="sd">        include_image_count</span>
<span class="sd">            Whether to include the count of images in the fetched datasets.</span>
<span class="sd">        include_slice_count</span>
<span class="sd">            Whether to include the count of slices in the fetched datasets.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The matching dataset page iterator.</span>

<span class="sd">        Yields</span>
<span class="sd">        -------</span>
<span class="sd">            The next page of matching datasets.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">page</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">page_result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">limit</span> <span class="o">=</span> <span class="n">FETCH_PAGE_LIMIT</span>

        <span class="k">def</span> <span class="nf">fetch_result</span><span class="p">(</span><span class="n">page</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">page_result</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">fetch_page</span><span class="p">(</span>
                <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
                <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
                <span class="n">exact</span><span class="o">=</span><span class="n">exact</span><span class="p">,</span>
                <span class="n">contains</span><span class="o">=</span><span class="n">contains</span><span class="p">,</span>
                <span class="n">include_image_count</span><span class="o">=</span><span class="n">include_image_count</span><span class="p">,</span>
                <span class="n">include_slice_count</span><span class="o">=</span><span class="n">include_slice_count</span><span class="p">,</span>
                <span class="n">page</span><span class="o">=</span><span class="n">page</span><span class="p">,</span>
                <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">page_result</span>

        <span class="n">page_result</span> <span class="o">=</span> <span class="n">fetch_result</span><span class="p">(</span><span class="n">page</span><span class="o">=</span><span class="n">page</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">page_result</span>

        <span class="k">while</span> <span class="n">page</span> <span class="o">*</span> <span class="n">limit</span> <span class="o">&lt;</span> <span class="n">page_result</span><span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">]:</span>
            <span class="n">page</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">page_result</span> <span class="o">=</span> <span class="n">fetch_result</span><span class="p">(</span><span class="n">page</span><span class="o">=</span><span class="n">page</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">page_result</span></div>

<div class="viewcode-block" id="Dataset.create"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Dataset.create">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dataset</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a dataset.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name</span>
<span class="sd">            The name of the dataset to create.</span>
<span class="sd">        description</span>
<span class="sd">            The description of the dataset to create.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The created dataset.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ConflictError</span>
<span class="sd">            When a dataset with the provided name already exists.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">Dataset</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">endpoint_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Dataset.delete"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Dataset.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes the dataset.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ConflictError</span>
<span class="sd">            When there are images in the dataset.</span>
<span class="sd">            Delete the images before deleting the dataset.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpoint_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">}</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;force&quot;</span><span class="p">:</span> <span class="n">force</span><span class="p">}</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">Dataset</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">endpoint_params</span><span class="o">=</span><span class="n">endpoint_params</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Dataset.modify"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Dataset.modify">[docs]</a>    <span class="k">def</span> <span class="nf">modify</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Modifies the dataset.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name</span>
<span class="sd">            The new name for the dataset.</span>
<span class="sd">        description</span>
<span class="sd">            The new description for the dataset.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpoint_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">}</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">})</span>

        <span class="k">if</span> <span class="n">description</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">description</span><span class="p">})</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">Dataset</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">endpoint_params</span><span class="o">=</span><span class="n">endpoint_params</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
            <span class="n">method</span><span class="o">=</span><span class="s2">&quot;patch&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Dataset.add_images"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Dataset.add_images">[docs]</a>    <span class="k">def</span> <span class="nf">add_images</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">images</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Image</span><span class="p">],</span>
        <span class="n">asynchronous</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Job</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a job that adds newly initialized images to the dataset.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        images</span>
<span class="sd">            Newly initialized images to add.</span>
<span class="sd">        asynchronous</span>
<span class="sd">            Whether to immediately return the job after creating it.</span>
<span class="sd">            If set to ``False``, the function waits for the job to finish before returning.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The created job</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Image</span><span class="o">.</span><span class="n">create_bulk</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">dataset_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">images</span><span class="o">=</span><span class="n">images</span><span class="p">,</span>
            <span class="n">asynchronous</span><span class="o">=</span><span class="n">asynchronous</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Dataset.fetch_images"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Dataset.fetch_images">[docs]</a>    <span class="k">def</span> <span class="nf">fetch_images</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">slice</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_annotations</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Image</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches images from the dataset that match the provided filters.</span>
<span class="sd">        If filters are not provided, fetches all images.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        key</span>
<span class="sd">            The key of a specific image to fetch.</span>
<span class="sd">            If provided, only returns at most 1 matching image.</span>
<span class="sd">        query</span>
<span class="sd">            A query string to filter the images to fetch.</span>
<span class="sd">        slice</span>
<span class="sd">            The name of a slice to fetch images from.</span>
<span class="sd">        include_annotations</span>
<span class="sd">            Whether to include annotations in the fetched images.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            Matching images.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        NotFoundError</span>
<span class="sd">            When the dataset does not exist.</span>
<span class="sd">            This could occur if the dataset has been deleted.</span>
<span class="sd">        QuerySyntaxError</span>
<span class="sd">            When the provided ``query`` is syntactically incorrect.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">Image</span><span class="o">.</span><span class="n">fetch_all</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">dataset_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span>
            <span class="nb">slice</span><span class="o">=</span><span class="nb">slice</span><span class="p">,</span>
            <span class="n">include_annotations</span><span class="o">=</span><span class="n">include_annotations</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Dataset.fetch_images_iter"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Dataset.fetch_images_iter">[docs]</a>    <span class="k">def</span> <span class="nf">fetch_images_iter</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">slice</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_annotations</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Image</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterates through images in the dataset that match the provided filters.</span>
<span class="sd">        If filters are not provided, iterates through all images.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        key</span>
<span class="sd">            The key of a specific image to fetch.</span>
<span class="sd">            If provided, only returns at most 1 matching image.</span>
<span class="sd">        query</span>
<span class="sd">            A query string to filter the images to fetch.</span>
<span class="sd">        slice</span>
<span class="sd">            The name of a slice to fetch images from.</span>
<span class="sd">        include_annotations</span>
<span class="sd">            Whether to include annotations in the fetched images.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The matching image iterator.</span>

<span class="sd">        Yields</span>
<span class="sd">        -------</span>
<span class="sd">            The next matching image.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        NotFoundError</span>
<span class="sd">            When the dataset does not exist.</span>
<span class="sd">            This could occur if the dataset has been deleted.</span>
<span class="sd">        QuerySyntaxError</span>
<span class="sd">            When the provided ``query`` is syntactically incorrect.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Image</span><span class="o">.</span><span class="n">fetch_all_iter</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">dataset_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span>
            <span class="nb">slice</span><span class="o">=</span><span class="nb">slice</span><span class="p">,</span>
            <span class="n">include_annotations</span><span class="o">=</span><span class="n">include_annotations</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Dataset.create_slice"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Dataset.create_slice">[docs]</a>    <span class="k">def</span> <span class="nf">create_slice</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Slice</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a slice in the dataset.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name</span>
<span class="sd">            The name of the slice to create.</span>
<span class="sd">        description</span>
<span class="sd">            The description of the slice to create.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The created slice</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Slice</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">dataset_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Dataset.fetch_slice"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Dataset.fetch_slice">[docs]</a>    <span class="k">def</span> <span class="nf">fetch_slice</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_image_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Slice</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches a slice from the dataset.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        id</span>
<span class="sd">            The ID of the slice to fetch.</span>
<span class="sd">            Must provide at least one of ``id`` or ``name``.</span>
<span class="sd">        name</span>
<span class="sd">            The name of the slice to fetch.</span>
<span class="sd">            Must provide at least one of ``id`` or ``name``.</span>
<span class="sd">        include_image_count</span>
<span class="sd">            Whether to include the count of images in the fetched slice.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The fetched slice.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Slice</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">dataset_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">include_image_count</span><span class="o">=</span><span class="n">include_image_count</span><span class="p">,</span>
        <span class="p">)</span></div>

    <span class="c1"># TODO: list reference issue, needs a fix.</span>
<div class="viewcode-block" id="Dataset.delete_images"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Dataset.delete_images">[docs]</a>    <span class="k">def</span> <span class="nf">delete_images</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">images</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Image</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">image_ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">image_keys</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">asynchronous</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Job</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a job that deletes images from the dataset.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        images</span>
<span class="sd">            Images to delete.</span>
<span class="sd">        image_ids</span>
<span class="sd">            IDs of images to delete.</span>
<span class="sd">        image_keys</span>
<span class="sd">            Keys of images to delete.</span>
<span class="sd">        asynchronous</span>
<span class="sd">            Whether to immediately return the job after creating it.</span>
<span class="sd">            If set to ``False``, the function waits for the job to finish before returning.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The created job.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Image</span><span class="o">.</span><span class="n">delete_bulk</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">dataset_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">images</span><span class="o">=</span><span class="n">images</span><span class="p">,</span>
            <span class="n">image_ids</span><span class="o">=</span><span class="n">image_ids</span><span class="p">,</span>
            <span class="n">image_keys</span><span class="o">=</span><span class="n">image_keys</span><span class="p">,</span>
            <span class="n">asynchronous</span><span class="o">=</span><span class="n">asynchronous</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Dataset.add_annotations"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Dataset.add_annotations">[docs]</a>    <span class="k">def</span> <span class="nf">add_annotations</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">annotations</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Annotation</span><span class="p">],</span>
        <span class="n">asynchronous</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Job</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a job that adds newly initialized annotations to the dataset.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        annotations</span>
<span class="sd">            Newly initialized annotations to add.</span>
<span class="sd">        asynchronous</span>
<span class="sd">            Whether to immediately return the job after creating it.</span>
<span class="sd">            If set to ``False``, the function waits for the job to finish before returning.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The created job.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Annotation</span><span class="o">.</span><span class="n">create_bulk</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">dataset_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">annotations</span><span class="o">=</span><span class="n">annotations</span><span class="p">,</span>
            <span class="n">asynchronous</span><span class="o">=</span><span class="n">asynchronous</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Dataset.refresh"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Dataset.refresh">[docs]</a>    <span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Refreshes the dataset.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpoint_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">}</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="s2">&quot;image_count&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;expand&quot;</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;expand&quot;</span><span class="p">,</span> <span class="p">[])</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;image_count&quot;</span><span class="p">]})</span>

        <span class="k">if</span> <span class="s2">&quot;slice_count&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;expand&quot;</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;expand&quot;</span><span class="p">,</span> <span class="p">[])</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;slice_count&quot;</span><span class="p">]})</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">Dataset</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">endpoint_params</span><span class="o">=</span><span class="n">endpoint_params</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span></div></div>


<div class="viewcode-block" id="BaseImageSource"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.BaseImageSource">[docs]</a><span class="k">class</span> <span class="nc">BaseImageSource</span><span class="p">(</span><span class="n">SuperbAIObject</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">**</span><span class="n">params</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">BaseImageSource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">([(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="p">)]):</span>
            <span class="bp">self</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">convert_to_superb_ai_object</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">v</span><span class="p">)</span></div>


<div class="viewcode-block" id="ImageSourceLocal"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.ImageSourceLocal">[docs]</a><span class="k">class</span> <span class="nc">ImageSourceLocal</span><span class="p">(</span><span class="n">BaseImageSource</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">asset</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">],</span>
        <span class="n">asset_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">params</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes a local image source.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        asset</span>
<span class="sd">            The data of the image.</span>
<span class="sd">            Supports byte array, string path, ``Path``object of the image.</span>
<span class="sd">        asset_id</span>
<span class="sd">            The ID of the asset.</span>
<span class="sd">            Should not be explicitly provided.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ImageSourceLocal</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;LOCAL&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">asset</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">asset</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">asset</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_asset_path</span> <span class="o">=</span> <span class="n">asset</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__set_asset</span><span class="p">(</span><span class="n">asset</span><span class="o">=</span><span class="n">asset</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_upload_url</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">asset_id</span> <span class="o">=</span> <span class="n">asset_id</span>

    <span class="k">def</span> <span class="nf">__set_asset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">asset</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_asset</span> <span class="o">=</span> <span class="n">asset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_asset_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asset</span><span class="p">)</span>

<div class="viewcode-block" id="ImageSourceLocal.get_asset"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.ImageSourceLocal.get_asset">[docs]</a>    <span class="k">def</span> <span class="nf">get_asset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_asset</span><span class="p">()</span>

        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_asset&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageSourceLocal.load_asset"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.ImageSourceLocal.load_asset">[docs]</a>    <span class="k">def</span> <span class="nf">load_asset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_asset&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_asset_path&quot;</span><span class="p">):</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_asset_path</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__set_asset</span><span class="p">(</span><span class="n">asset</span><span class="o">=</span><span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">error</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">(</span>
                    <span class="s2">&quot;Local image file path or bytes not supplied.&quot;</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_asset</span></div>

<div class="viewcode-block" id="ImageSourceLocal.unload_asset"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.ImageSourceLocal.unload_asset">[docs]</a>    <span class="k">def</span> <span class="nf">unload_asset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_asset&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">force</span><span class="p">:</span>
            <span class="nb">delattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_asset&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageSourceLocal.get_asset_size"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.ImageSourceLocal.get_asset_size">[docs]</a>    <span class="k">def</span> <span class="nf">get_asset_size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_asset_size&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_asset</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_asset_size</span></div></div>


<div class="viewcode-block" id="ImageSourceUrl"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.ImageSourceUrl">[docs]</a><span class="k">class</span> <span class="nc">ImageSourceUrl</span><span class="p">(</span><span class="n">BaseImageSource</span><span class="p">):</span>
    <span class="n">__validator_message</span> <span class="o">=</span> <span class="s2">&quot;The URL is invalid: </span><span class="si">{value}</span><span class="s2">&quot;</span>
    <span class="n">__validator_regex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
        <span class="sa">r</span><span class="s2">&quot;^(?:http|ftp)s?://&quot;</span>  <span class="c1"># http:// or https://</span>
        <span class="sa">r</span><span class="s2">&quot;(?:(?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\.)+(?:[A-Z]{2,6}\.?|[A-Z0-9-]{2,}\.?)|&quot;</span>  <span class="c1"># domain...</span>
        <span class="sa">r</span><span class="s2">&quot;localhost|&quot;</span>  <span class="c1"># localhost...</span>
        <span class="sa">r</span><span class="s2">&quot;\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})&quot;</span>  <span class="c1"># ...or ip</span>
        <span class="sa">r</span><span class="s2">&quot;(?::\d+)?&quot;</span>  <span class="c1"># optional port</span>
        <span class="sa">r</span><span class="s2">&quot;(?:/?|[/?]\S+)$&quot;</span><span class="p">,</span>
        <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes a URL image source.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        url</span>
<span class="sd">            The URL of the image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ImageSourceUrl</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;URL&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__validate</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">url</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
            <span class="ow">or</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span>
            <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__validator_regex</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="n">error</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__validator_message</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">value</span></div>


<div class="viewcode-block" id="JobType"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.JobType">[docs]</a><span class="k">class</span> <span class="nc">JobType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Available types of a job.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">ANNOTATION_IMPORT</span> <span class="o">=</span> <span class="s2">&quot;ANNOTATION_IMPORT&quot;</span>
    <span class="n">DELETE_IMAGES</span> <span class="o">=</span> <span class="s2">&quot;DELETE_IMAGES&quot;</span>
    <span class="n">IMAGE_IMPORT</span> <span class="o">=</span> <span class="s2">&quot;IMAGE_IMPORT&quot;</span>
    <span class="n">UPDATE_SLICE</span> <span class="o">=</span> <span class="s2">&quot;UPDATE_SLICE&quot;</span>
    <span class="n">UPDATE_SLICE_BY_QUERY</span> <span class="o">=</span> <span class="s2">&quot;UPDATE_SLICE_BY_QUERY&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span></div>


<div class="viewcode-block" id="Job"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Job">[docs]</a><span class="k">class</span> <span class="nc">Job</span><span class="p">(</span><span class="n">PaginateResource</span><span class="p">):</span>
    <span class="n">_endpoints</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;bulk_create&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/batch/jobs/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bulk_create_upload&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/batch/params/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fetch&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/batch/jobs/</span><span class="si">{id}</span><span class="s2">/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;paginate&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/batch/jobs/&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">_object_type</span> <span class="o">=</span> <span class="s2">&quot;job&quot;</span>

<div class="viewcode-block" id="Job.create"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Job.create">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">job_type</span><span class="p">:</span> <span class="n">JobType</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Job</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a job.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        job_type</span>
<span class="sd">            The type of the job to create.</span>
<span class="sd">        data</span>
<span class="sd">            The payload for the job to process.</span>
<span class="sd">            Differs by each ``JobType``.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The created job.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">job_type</span><span class="p">,</span> <span class="n">JobType</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">error</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid job type </span><span class="si">{</span><span class="n">job_type</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

        <span class="c1"># Upload params</span>
        <span class="n">upload_params_dict</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_upload_params</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span> <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span>
        <span class="p">)</span>

        <span class="c1"># Submit the bulk job</span>
        <span class="n">bulk_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;job_type&quot;</span><span class="p">:</span> <span class="n">job_type</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;param_id&quot;</span><span class="p">:</span> <span class="n">upload_params_dict</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]}</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_endpoint</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;bulk_create&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Job</span><span class="o">.</span><span class="n">_static_request</span><span class="p">(</span>
            <span class="n">method_</span><span class="o">=</span><span class="s2">&quot;post&quot;</span><span class="p">,</span>
            <span class="n">url_</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">bulk_params</span><span class="p">,</span>
            <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Job.fetch"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Job.fetch">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Job</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches a job.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        id</span>
<span class="sd">            The ID of the job to fetch.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The fetched job.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpoint_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">id</span><span class="p">}</span>

        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">Job</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">endpoint_params</span><span class="o">=</span><span class="n">endpoint_params</span><span class="p">,</span>
            <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Job.fetch_all"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Job.fetch_all">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch_all</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">from_date</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Job</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches jobs that match the date filter.</span>
<span class="sd">        If not provided, fetches all jobs.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        from_date</span>
<span class="sd">            ISO 8601 formatted UTC date string to filter jobs created on or after the specified date.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            Matching jobs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">all_jobs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">fetch_page_iter</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">from_date</span><span class="o">=</span><span class="n">from_date</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="n">all_jobs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span> <span class="p">[]))</span>
        <span class="k">return</span> <span class="n">all_jobs</span></div>

<div class="viewcode-block" id="Job.fetch_all_iter"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Job.fetch_all_iter">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch_all_iter</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">from_date</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Job</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterates through jobs that match the date filter.</span>
<span class="sd">        If not provided, iterates through all jobs.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        from_date</span>
<span class="sd">            ISO 8601 formatted UTC date string to filter jobs created on or after the specified date.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The matching job iterator.</span>

<span class="sd">        Yields</span>
<span class="sd">        -------</span>
<span class="sd">            The next matching job.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">fetch_result</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">fetch_page_iter</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">from_date</span><span class="o">=</span><span class="n">from_date</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="k">for</span> <span class="n">job</span> <span class="ow">in</span> <span class="n">fetch_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span> <span class="p">[]):</span>
                <span class="k">yield</span> <span class="n">job</span></div>

<div class="viewcode-block" id="Job.fetch_page"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Job.fetch_page">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch_page</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">from_date</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">cursor</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Job</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches a page of jobs that match the date filter.</span>
<span class="sd">        If not provided, paginates all jobs.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        cursor</span>
<span class="sd">            A cursor for pagination.</span>
<span class="sd">            Pass in `next_cursor` from the previous page to fetch the next page.</span>
<span class="sd">        limit</span>
<span class="sd">            The maximum number of jobs in a page.</span>
<span class="sd">        from_date</span>
<span class="sd">            ISO 8601 formatted UTC date string to filter jobs created on or after the specified date.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            A page of matching jobs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="n">limit</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">from_date</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;from_date&quot;</span><span class="p">:</span> <span class="n">from_date</span><span class="p">})</span>

        <span class="k">if</span> <span class="n">cursor</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;cursor&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cursor</span>

        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">Job</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span><span class="o">.</span><span class="n">fetch_page</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">endpoint_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Job.fetch_page_iter"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Job.fetch_page_iter">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch_page_iter</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">from_date</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Job</span><span class="p">]]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterates through pages of jobs that match the date filter.</span>
<span class="sd">        If not provided, paginates all jobs.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        from_date</span>
<span class="sd">            ISO 8601 formatted UTC date string to filter jobs created on or after the specified date.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The matching job page iterator.</span>

<span class="sd">        Yields</span>
<span class="sd">        -------</span>
<span class="sd">            The next page of matching jobs.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">cursor</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">page_result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">limit</span> <span class="o">=</span> <span class="n">FETCH_PAGE_LIMIT</span>

        <span class="k">def</span> <span class="nf">fetch_result</span><span class="p">(</span><span class="n">cursor</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">page_result</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">fetch_page</span><span class="p">(</span>
                <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
                <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
                <span class="n">from_date</span><span class="o">=</span><span class="n">from_date</span><span class="p">,</span>
                <span class="n">cursor</span><span class="o">=</span><span class="n">cursor</span><span class="p">,</span>
                <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">page_result</span>

        <span class="n">page_result</span> <span class="o">=</span> <span class="n">fetch_result</span><span class="p">(</span><span class="n">cursor</span><span class="o">=</span><span class="n">cursor</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">page_result</span>

        <span class="k">while</span> <span class="p">(</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">page_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span> <span class="p">[]))</span> <span class="o">==</span> <span class="n">limit</span>
            <span class="ow">and</span> <span class="n">page_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;next_cursor&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">):</span>
            <span class="n">page_result</span> <span class="o">=</span> <span class="n">fetch_result</span><span class="p">(</span><span class="n">cursor</span><span class="o">=</span><span class="n">page_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;next_cursor&quot;</span><span class="p">))</span>
            <span class="k">yield</span> <span class="n">page_result</span></div>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_upload_params</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="c1"># Upload params to S3 bucket</span>
        <span class="n">params_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="bp">cls</span><span class="o">.</span><span class="n">ReprJSONEncoder</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_endpoint</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;bulk_create_upload&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

        <span class="n">requestor</span> <span class="o">=</span> <span class="n">api_requestor</span><span class="o">.</span><span class="n">APIRequestor</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span> <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span>
        <span class="p">)</span>
        <span class="n">response</span><span class="p">,</span> <span class="n">access_key</span> <span class="o">=</span> <span class="n">requestor</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
            <span class="n">method</span><span class="o">=</span><span class="s2">&quot;post&quot;</span><span class="p">,</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;file_size&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">params_data</span><span class="p">)},</span>
            <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">upload_params_dict</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">convert_to_superb_ai_object</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="n">response</span><span class="p">,</span> <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span> <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span>
        <span class="p">)</span>

        <span class="n">put_params_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
            <span class="n">upload_params_dict</span><span class="p">[</span><span class="s2">&quot;upload_url&quot;</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="n">params_data</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">put_params_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">error</span><span class="o">.</span><span class="n">SuperbAIError</span><span class="p">(</span>
                <span class="s2">&quot;There was an error in uploading the job parameters.&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">upload_params_dict</span>

<div class="viewcode-block" id="Job.refresh"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Job.refresh">[docs]</a>    <span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Refreshes the job.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpoint_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">}</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">Job</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span> <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span> <span class="n">endpoint_params</span><span class="o">=</span><span class="n">endpoint_params</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Job.wait_until_complete"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Job.wait_until_complete">[docs]</a>    <span class="k">def</span> <span class="nf">wait_until_complete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Waits until the job has either completed or failed.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        timeout</span>
<span class="sd">            The maximum time in seconds to wait for.</span>
<span class="sd">            If not provided, ``spb_curate.timeout`` will be used.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">spb_curate</span> <span class="kn">import</span> <span class="n">timeout</span> <span class="k">as</span> <span class="n">default_timeout</span>

        <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">timeout</span> <span class="o">=</span> <span class="n">default_timeout</span>

        <span class="n">frequency</span> <span class="o">=</span> <span class="mi">2</span>  <span class="c1"># seconds</span>

        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;FAILED&quot;</span><span class="p">,</span> <span class="s2">&quot;COMPLETE&quot;</span><span class="p">]:</span>
                <span class="k">break</span>

            <span class="n">wait_seconds</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">timeout</span><span class="p">,</span> <span class="n">frequency</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">wait_seconds</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">break</span>

            <span class="n">timeout</span> <span class="o">-=</span> <span class="n">frequency</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">wait_seconds</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="Image"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Image">[docs]</a><span class="k">class</span> <span class="nc">Image</span><span class="p">(</span><span class="n">DeleteResource</span><span class="p">,</span> <span class="n">PaginateResource</span><span class="p">,</span> <span class="n">ModifyResource</span><span class="p">):</span>
    <span class="n">_endpoints</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;bulk_asset_upload&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/batch/assets/bulk/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;delete&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/dataset-core/datasets/</span><span class="si">{dataset_id}</span><span class="s2">/images/</span><span class="si">{id}</span><span class="s2">/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fetch&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/dataset-query/datasets/</span><span class="si">{dataset_id}</span><span class="s2">/images/</span><span class="si">{id}</span><span class="s2">/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;paginate&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/dataset-query/datasets/</span><span class="si">{dataset_id}</span><span class="s2">/images/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;modify&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/dataset-core/datasets/</span><span class="si">{dataset_id}</span><span class="s2">/images/</span><span class="si">{id}</span><span class="s2">/metadata&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">_object_type</span> <span class="o">=</span> <span class="s2">&quot;image&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">source</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">ImageSourceLocal</span><span class="p">,</span> <span class="n">ImageSourceUrl</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">params</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes an image.</span>
<span class="sd">        A newly initialized image is incomplete must be added to a dataset.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        key</span>
<span class="sd">            The unique key of the image to create.</span>
<span class="sd">        source</span>
<span class="sd">            The source of the image to.</span>
<span class="sd">        metadata</span>
<span class="sd">            The metadata associated with the image.</span>
<span class="sd">            Must be flat (one level deep).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Image</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_init_volatile_fields</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">source</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">ImageSourceLocal</span><span class="p">,</span> <span class="n">ImageSourceUrl</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">params</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Image</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">_init_volatile_fields</span><span class="p">(</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span>
        <span class="p">)</span>

        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">is_required</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">(</span>
            <span class="p">(</span>
                <span class="p">(</span><span class="s2">&quot;key&quot;</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
                <span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
                <span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="p">):</span>
            <span class="k">if</span> <span class="n">is_required</span> <span class="ow">and</span> <span class="n">v</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">error</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2"> is required.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">convert_to_superb_ai_object</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">v</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">__upload_local_images</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">images</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Image</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Image</span><span class="p">]:</span>
        <span class="kn">import</span> <span class="nn">spb_curate</span>

        <span class="n">bulk_upload_bytes_max</span> <span class="o">=</span> <span class="n">spb_curate</span><span class="o">.</span><span class="n">bulk_upload_bytes_max</span>
        <span class="n">bulk_upload_object_max</span> <span class="o">=</span> <span class="n">spb_curate</span><span class="o">.</span><span class="n">bulk_upload_object_max</span>

        <span class="n">url</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_endpoint</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;bulk_asset_upload&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">requestor</span> <span class="o">=</span> <span class="n">api_requestor</span><span class="o">.</span><span class="n">APIRequestor</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span> <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span>
        <span class="p">)</span>

        <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">images</span><span class="p">)</span>
        <span class="n">last_i</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># slice position for the source list</span>

        <span class="k">def</span> <span class="nf">upload_assets</span><span class="p">(</span><span class="n">file_sizes</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>
            <span class="c1"># First generate presigned urls</span>
            <span class="n">response</span><span class="p">,</span> <span class="n">access_key</span> <span class="o">=</span> <span class="n">requestor</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
                <span class="n">method</span><span class="o">=</span><span class="s2">&quot;post&quot;</span><span class="p">,</span>
                <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;file_sizes&quot;</span><span class="p">:</span> <span class="n">file_sizes</span><span class="p">},</span>
                <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">assets</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">convert_to_superb_ai_object</span><span class="p">(</span>
                <span class="n">data</span><span class="o">=</span><span class="n">response</span><span class="p">,</span> <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span> <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span>
            <span class="p">)</span>

            <span class="c1"># Upload asset data to S3 and save the asset_id</span>
            <span class="k">for</span> <span class="n">asset_i</span><span class="p">,</span> <span class="n">asset</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">assets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span> <span class="p">[])):</span>
                <span class="n">source</span> <span class="o">=</span> <span class="n">images</span><span class="p">[</span><span class="n">last_i</span> <span class="o">+</span> <span class="n">asset_i</span><span class="p">]</span><span class="o">.</span><span class="n">source</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">get_asset</span><span class="p">()</span>
                <span class="n">put_image_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">asset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;upload_url&quot;</span><span class="p">),</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
                <span class="n">source</span><span class="o">.</span><span class="n">unload_asset</span><span class="p">(</span><span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">put_image_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">error</span><span class="o">.</span><span class="n">SuperbAIError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;There was an error in uploading the local file of the image with the key &#39;</span><span class="si">{</span><span class="n">images</span><span class="p">[</span><span class="n">last_i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">asset_i</span><span class="p">]</span><span class="o">.</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
                    <span class="p">)</span>

                <span class="n">images</span><span class="p">[</span><span class="n">last_i</span> <span class="o">+</span> <span class="n">asset_i</span><span class="p">]</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;asset_id&quot;</span><span class="p">:</span> <span class="n">asset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)})</span>

        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">total_transfer_size</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">file_sizes</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">N</span><span class="p">:</span>
            <span class="n">asset_size</span> <span class="o">=</span> <span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">get_asset_size</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">asset_size</span> <span class="o">&gt;</span> <span class="n">UPLOAD_IMAGE_FILE_BYTES_MAX</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">error</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;The image with the key &#39;</span><span class="si">{</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39; has exceeded the file size &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;limit of 20MB.&quot;</span>
                <span class="p">)</span>

            <span class="n">total_transfer_size</span> <span class="o">+=</span> <span class="n">asset_size</span>
            <span class="n">file_sizes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">asset_size</span><span class="p">)</span>

            <span class="k">if</span> <span class="p">(</span>
                <span class="n">total_transfer_size</span> <span class="o">&gt;=</span> <span class="n">bulk_upload_bytes_max</span>
                <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">file_sizes</span><span class="p">)</span> <span class="o">==</span> <span class="n">bulk_upload_object_max</span>
                <span class="ow">or</span> <span class="n">i</span> <span class="o">==</span> <span class="p">(</span><span class="n">N</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="n">upload_assets</span><span class="p">(</span><span class="n">file_sizes</span><span class="o">=</span><span class="n">file_sizes</span><span class="p">)</span>
                <span class="n">total_transfer_size</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">file_sizes</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">last_i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>

            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">images</span>

<div class="viewcode-block" id="Image.create_bulk"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Image.create_bulk">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_bulk</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">images</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Image</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]],</span>
        <span class="n">asynchronous</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Job</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a job that adds newly initialized images to a dataset.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id</span>
<span class="sd">            The ID of the dataset to add the images to.</span>
<span class="sd">        annotations</span>
<span class="sd">            Newly initialized images to add.</span>
<span class="sd">        asynchronous</span>
<span class="sd">            Whether to immediately return the job after creating it.</span>
<span class="sd">            If set to ``False``, the function waits for the job to finish before returning.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The created job.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">param_images</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Image</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">local_images</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Image</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">image</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">images</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">),</span> <span class="n">ImageSourceLocal</span><span class="p">):</span>
                <span class="n">local_images</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">param_images</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>

        <span class="c1"># Upload all local images to s3 storage and retrieve the asset_ids</span>
        <span class="k">if</span> <span class="n">local_images</span><span class="p">:</span>
            <span class="n">param_images</span> <span class="o">+=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__upload_local_images</span><span class="p">(</span>
                <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span> <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span> <span class="n">images</span><span class="o">=</span><span class="n">local_images</span>
            <span class="p">)</span>

        <span class="n">job</span> <span class="o">=</span> <span class="n">Job</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">job_type</span><span class="o">=</span><span class="n">JobType</span><span class="o">.</span><span class="n">IMAGE_IMPORT</span><span class="p">,</span>
            <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">dataset_id</span><span class="p">,</span> <span class="s2">&quot;images&quot;</span><span class="p">:</span> <span class="n">param_images</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">asynchronous</span><span class="p">:</span>
            <span class="n">job</span><span class="o">.</span><span class="n">wait_until_complete</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">job</span></div>

<div class="viewcode-block" id="Image.delete"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Image.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes the image.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpoint_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset_id</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">}</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">Image</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span> <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span> <span class="n">endpoint_params</span><span class="o">=</span><span class="n">endpoint_params</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Image.fetch"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Image.fetch">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">include_annotations</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Image</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches an image.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id</span>
<span class="sd">            The ID of the dataset with the image to fetch.</span>
<span class="sd">        id</span>
<span class="sd">            The ID of the image to fetch.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The fetched image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpoint_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">dataset_id</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">id</span><span class="p">}</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">include_annotations</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;expand&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;annotations&quot;</span><span class="p">]})</span>

        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">Image</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">endpoint_params</span><span class="o">=</span><span class="n">endpoint_params</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Image.fetch_all"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Image.fetch_all">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch_all</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">slice</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_annotations</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Image</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches images in a dataset that match the provided filters.</span>
<span class="sd">        If filters are not provided, fetches all images.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id</span>
<span class="sd">            The ID of the dataset to fetch images from.</span>
<span class="sd">        key</span>
<span class="sd">            The key of a specific image to fetch.</span>
<span class="sd">            If provided, only returns at most 1 matching image.</span>
<span class="sd">        query</span>
<span class="sd">            A query string to filter the images to fetch.</span>
<span class="sd">        slice</span>
<span class="sd">            The name of a slice to fetch images from.</span>
<span class="sd">        include_annotations</span>
<span class="sd">            Whether to include annotations in the fetched images.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            Matching images.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        NotFoundError</span>
<span class="sd">            When a dataset with the provided ``dataset_id`` does not exist.</span>
<span class="sd">        QuerySyntaxError</span>
<span class="sd">            When the provided ``query`` is syntactically incorrect.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">all_images</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">fetch_page_iter</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">dataset_id</span><span class="o">=</span><span class="n">dataset_id</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span>
            <span class="nb">slice</span><span class="o">=</span><span class="nb">slice</span><span class="p">,</span>
            <span class="n">include_annotations</span><span class="o">=</span><span class="n">include_annotations</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="n">all_images</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span> <span class="p">[]))</span>
        <span class="k">return</span> <span class="n">all_images</span></div>

<div class="viewcode-block" id="Image.fetch_all_iter"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Image.fetch_all_iter">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch_all_iter</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">slice</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_annotations</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Image</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterates through images in a dataset that match the provided filters.</span>
<span class="sd">        If filters are not provided, iterates through all images.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id</span>
<span class="sd">            The ID of the dataset to fetch images from.</span>
<span class="sd">        key</span>
<span class="sd">            The key of a specific image to fetch.</span>
<span class="sd">            If provided, only returns at most 1 matching image.</span>
<span class="sd">        query</span>
<span class="sd">            A query string to filter the images to fetch.</span>
<span class="sd">        slice</span>
<span class="sd">            The name of a slice to fetch images from.</span>
<span class="sd">        include_annotations</span>
<span class="sd">            Whether to include annotations in the fetched images.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The matching image iterator.</span>

<span class="sd">        Yields</span>
<span class="sd">        -------</span>
<span class="sd">            The next matching image.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        NotFoundError</span>
<span class="sd">            When a dataset with the provided ``dataset_id`` does not exist.</span>
<span class="sd">        QuerySyntaxError</span>
<span class="sd">            When the provided ``query`` is syntactically incorrect.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">fetch_result</span> <span class="ow">in</span> <span class="n">Image</span><span class="o">.</span><span class="n">fetch_page_iter</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">dataset_id</span><span class="o">=</span><span class="n">dataset_id</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span>
            <span class="nb">slice</span><span class="o">=</span><span class="nb">slice</span><span class="p">,</span>
            <span class="n">include_annotations</span><span class="o">=</span><span class="n">include_annotations</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">fetch_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span> <span class="p">[]):</span>
                <span class="k">yield</span> <span class="n">image</span></div>

<div class="viewcode-block" id="Image.fetch_page"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Image.fetch_page">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch_page</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">slice</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_annotations</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">search_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Image</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches a page of images that match the provided filters.</span>
<span class="sd">        If filters are not provided, paginates all images.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id</span>
<span class="sd">            The ID of the dataset to fetch images from.</span>
<span class="sd">        key</span>
<span class="sd">            The key of a specific image to fetch.</span>
<span class="sd">            If provided, only returns at most 1 matching image.</span>
<span class="sd">        query</span>
<span class="sd">            A query string to filter the images to fetch.</span>
<span class="sd">        slice</span>
<span class="sd">            The name of a slice to fetch images from.</span>
<span class="sd">        include_annotations</span>
<span class="sd">            Whether to include annotations in the fetched images.</span>
<span class="sd">        search_after</span>
<span class="sd">            The ID of an image to start the search from.</span>
<span class="sd">            If not provided, fetches the first page.</span>
<span class="sd">        limit</span>
<span class="sd">            The maximum number of images in a page.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            A page of matching images.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        NotFoundError</span>
<span class="sd">            When a dataset with the provided ``dataset_id`` does not exist.</span>
<span class="sd">        QuerySyntaxError</span>
<span class="sd">            When the provided ``query`` is syntactically incorrect.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpoint_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">dataset_id</span><span class="p">}</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="n">limit</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">key</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">key</span>

        <span class="k">if</span> <span class="n">query</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">query</span>

        <span class="k">if</span> <span class="nb">slice</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;slice&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">slice</span>

        <span class="c1"># TODO: if other expand parameters are added, fix this</span>
        <span class="k">if</span> <span class="n">include_annotations</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;expand&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;annotations&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">search_after</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;search_after&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">search_after</span><span class="p">]</span>

        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">Image</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span><span class="o">.</span><span class="n">fetch_page</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">endpoint_params</span><span class="o">=</span><span class="n">endpoint_params</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Image.fetch_page_iter"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Image.fetch_page_iter">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch_page_iter</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">slice</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_annotations</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Image</span><span class="p">]]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterates through pages of images from a dataset that match the provided filters.</span>
<span class="sd">        If filters are not provided, paginates all images.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id</span>
<span class="sd">            The ID of the dataset to fetch images from.</span>
<span class="sd">        key</span>
<span class="sd">            The key of a specific image to fetch.</span>
<span class="sd">            If provided, only returns at most 1 matching image.</span>
<span class="sd">        query</span>
<span class="sd">            A query string to filter the images to fetch.</span>
<span class="sd">        slice</span>
<span class="sd">            The name of a slice to fetch images from.</span>
<span class="sd">        include_annotations</span>
<span class="sd">            Whether to include annotations in the fetched images.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The matching image page iterator.</span>

<span class="sd">        Yields</span>
<span class="sd">        -------</span>
<span class="sd">            The next page of matching images.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        NotFoundError</span>
<span class="sd">            When a dataset with the provided ``dataset_id`` does not exist.</span>
<span class="sd">        QuerySyntaxError</span>
<span class="sd">            When the provided ``query`` is syntactically incorrect.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">search_after</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">page_result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">limit</span> <span class="o">=</span> <span class="n">FETCH_PAGE_LIMIT</span>

        <span class="k">def</span> <span class="nf">fetch_result</span><span class="p">(</span><span class="n">search_after</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">page_result</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">fetch_page</span><span class="p">(</span>
                <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
                <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
                <span class="n">dataset_id</span><span class="o">=</span><span class="n">dataset_id</span><span class="p">,</span>
                <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span>
                <span class="nb">slice</span><span class="o">=</span><span class="nb">slice</span><span class="p">,</span>
                <span class="n">include_annotations</span><span class="o">=</span><span class="n">include_annotations</span><span class="p">,</span>
                <span class="n">search_after</span><span class="o">=</span><span class="n">search_after</span><span class="p">,</span>
                <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">page_result</span>

        <span class="n">page_result</span> <span class="o">=</span> <span class="n">fetch_result</span><span class="p">(</span><span class="n">search_after</span><span class="o">=</span><span class="n">search_after</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">page_result</span>

        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">page_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span> <span class="p">[]))</span> <span class="o">==</span> <span class="n">limit</span> <span class="ow">and</span> <span class="n">page_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s2">&quot;last&quot;</span><span class="p">,</span> <span class="p">[]</span>
        <span class="p">):</span>
            <span class="n">page_result</span> <span class="o">=</span> <span class="n">fetch_result</span><span class="p">(</span><span class="n">search_after</span><span class="o">=</span><span class="n">page_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;last&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">yield</span> <span class="n">page_result</span></div>

<div class="viewcode-block" id="Image.delete_bulk"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Image.delete_bulk">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">delete_bulk</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">images</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Image</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">image_ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">image_keys</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">asynchronous</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Job</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a job that deletes images from the dataset.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id</span>
<span class="sd">            The ID of the dataset to delete images from.</span>
<span class="sd">        images</span>
<span class="sd">            Images to delete.</span>
<span class="sd">        image_ids</span>
<span class="sd">            IDs of images to delete.</span>
<span class="sd">        image_keys</span>
<span class="sd">            Keys of images to delete.</span>
<span class="sd">        asynchronous</span>
<span class="sd">            Whether to immediately return the job after creating it.</span>
<span class="sd">            If set to ``False``, the function waits for the job to finish before returning.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The created job.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">:</span>
            <span class="n">image_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">dataset_id</span><span class="p">,</span>
            <span class="s2">&quot;images&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;ids&quot;</span><span class="p">:</span> <span class="n">image_ids</span><span class="p">,</span>
                <span class="s2">&quot;keys&quot;</span><span class="p">:</span> <span class="n">image_keys</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="n">job</span> <span class="o">=</span> <span class="n">Job</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">job_type</span><span class="o">=</span><span class="n">JobType</span><span class="o">.</span><span class="n">DELETE_IMAGES</span><span class="p">,</span>
            <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">asynchronous</span><span class="p">:</span>
            <span class="n">job</span><span class="o">.</span><span class="n">wait_until_complete</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">job</span></div>

<div class="viewcode-block" id="Image.refresh"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Image.refresh">[docs]</a>    <span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Refreshes the image.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpoint_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset_id</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">}</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="s2">&quot;annotations&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;expand&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;annotations&quot;</span><span class="p">]})</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">Image</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">endpoint_params</span><span class="o">=</span><span class="n">endpoint_params</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Image.modify"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Image.modify">[docs]</a>    <span class="k">def</span> <span class="nf">modify</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Modifies the image.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        metadata</span>
<span class="sd">            The metadata associated with the image.</span>
<span class="sd">            Must be flat (one level deep).</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpoint_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset_id</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">}</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">metadata</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="n">metadata</span><span class="p">})</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">Image</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">endpoint_params</span><span class="o">=</span><span class="n">endpoint_params</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
            <span class="n">method</span><span class="o">=</span><span class="s2">&quot;put&quot;</span><span class="p">,</span>
        <span class="p">)</span></div></div>


<div class="viewcode-block" id="SearchFieldMapping"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.SearchFieldMapping">[docs]</a><span class="k">class</span> <span class="nc">SearchFieldMapping</span><span class="p">(</span><span class="n">PaginateResource</span><span class="p">):</span>
    <span class="n">_endpoints</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;paginate&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/dataset-query/datasets/</span><span class="si">{dataset_id}</span><span class="s2">/search-field-mappings&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">_object_type</span> <span class="o">=</span> <span class="s2">&quot;search_field_mapping&quot;</span>

<div class="viewcode-block" id="SearchFieldMapping.fetch"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.SearchFieldMapping.fetch">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">endpoint_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SearchFieldMapping</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Not implemented.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="SearchFieldMapping.fetch_all"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.SearchFieldMapping.fetch_all">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch_all</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">mapping_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">SearchFieldMappingType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">SearchFieldMapping</span><span class="p">],</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches search field mappings that match the provided filters.</span>
<span class="sd">        If filters are not provided, fetches all search field mappings.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id</span>
<span class="sd">            The ID of the dataset to fetch the search field mappings from.</span>
<span class="sd">        mapping_type</span>
<span class="sd">            A type of search field mappings to filter by.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            Matching search field mappings.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">all_search_field_mappings</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">fetch_page_iter</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">dataset_id</span><span class="o">=</span><span class="n">dataset_id</span><span class="p">,</span>
            <span class="n">mapping_type</span><span class="o">=</span><span class="n">mapping_type</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="n">all_search_field_mappings</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span> <span class="p">[]))</span>
        <span class="k">return</span> <span class="n">all_search_field_mappings</span></div>

<div class="viewcode-block" id="SearchFieldMapping.fetch_all_iter"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.SearchFieldMapping.fetch_all_iter">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch_all_iter</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">mapping_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">SearchFieldMappingType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">SearchFieldMapping</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterates through search field mappings that match the provided filters.</span>
<span class="sd">        If filters are not provided, iterates through all search field mappings.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id</span>
<span class="sd">            The ID of the dataset to fetch the search field mappings from.</span>
<span class="sd">        mapping_type</span>
<span class="sd">            A type of search field mappings to filter by.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The matching search field mapping iterator.</span>

<span class="sd">        Yields</span>
<span class="sd">        -------</span>
<span class="sd">            The next matching search field mapping.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="n">SearchFieldMapping</span><span class="o">.</span><span class="n">fetch_page_iter</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">dataset_id</span><span class="o">=</span><span class="n">dataset_id</span><span class="p">,</span>
            <span class="n">mapping_type</span><span class="o">=</span><span class="n">mapping_type</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="k">for</span> <span class="n">search_field_mapping</span> <span class="ow">in</span> <span class="n">page</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span> <span class="p">[]):</span>
                <span class="k">yield</span> <span class="n">search_field_mapping</span></div>

<div class="viewcode-block" id="SearchFieldMapping.fetch_page"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.SearchFieldMapping.fetch_page">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch_page</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">mapping_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">SearchFieldMappingType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">SearchFieldMapping</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches a page of search field mappings that match the provided filters.</span>
<span class="sd">        If filters are not provided, paginates all search field mappings.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id</span>
<span class="sd">            The ID of the dataset to fetch the search field mappings from.</span>
<span class="sd">        mapping_type</span>
<span class="sd">            A type of search field mappings to filter by.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            A page of matching search field mappings.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpoint_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">dataset_id</span><span class="p">}</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">mapping_type</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;mapping_type&quot;</span><span class="p">:</span> <span class="n">mapping_type</span><span class="o">.</span><span class="n">value</span><span class="p">})</span>

        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">SearchFieldMapping</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span><span class="o">.</span><span class="n">fetch_page</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">endpoint_params</span><span class="o">=</span><span class="n">endpoint_params</span><span class="p">,</span>
            <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="SearchFieldMapping.fetch_page_iter"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.SearchFieldMapping.fetch_page_iter">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch_page_iter</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">mapping_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">SearchFieldMappingType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">SearchFieldMapping</span><span class="p">]]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterates through pages of search field mappings that match the provided filters.</span>
<span class="sd">        If filters are not provided, paginates all search field mappings.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id</span>
<span class="sd">            The ID of the dataset to fetch the search field mappings from.</span>
<span class="sd">        mapping_type</span>
<span class="sd">            A type of search field mappings to filter by.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The matching search field mapping page iterator.</span>

<span class="sd">        Yields</span>
<span class="sd">        -------</span>
<span class="sd">            The next page of matching search field mappings.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">page_result</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">def</span> <span class="nf">fetch_result</span><span class="p">():</span>
            <span class="n">page_result</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">fetch_page</span><span class="p">(</span>
                <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
                <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
                <span class="n">dataset_id</span><span class="o">=</span><span class="n">dataset_id</span><span class="p">,</span>
                <span class="n">mapping_type</span><span class="o">=</span><span class="n">mapping_type</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">page_result</span>

        <span class="c1"># There is only one page</span>
        <span class="n">page_result</span> <span class="o">=</span> <span class="n">fetch_result</span><span class="p">()</span>
        <span class="k">yield</span> <span class="n">page_result</span></div>

<div class="viewcode-block" id="SearchFieldMapping.refresh"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.SearchFieldMapping.refresh">[docs]</a>    <span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Not implemented.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div></div>


<div class="viewcode-block" id="SearchFieldMappingType"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.SearchFieldMappingType">[docs]</a><span class="k">class</span> <span class="nc">SearchFieldMappingType</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
    <span class="n">ANNOTATION_CLASS</span> <span class="o">=</span> <span class="s2">&quot;annotations.class_count&quot;</span>
    <span class="n">ANNOTATION_METADATA</span> <span class="o">=</span> <span class="s2">&quot;annotations.metadata&quot;</span>
    <span class="n">IMAGE_METADATA</span> <span class="o">=</span> <span class="s2">&quot;images.metadata&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span></div>


<div class="viewcode-block" id="Slice"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Slice">[docs]</a><span class="k">class</span> <span class="nc">Slice</span><span class="p">(</span><span class="n">CreateResource</span><span class="p">,</span> <span class="n">DeleteResource</span><span class="p">,</span> <span class="n">PaginateResource</span><span class="p">,</span> <span class="n">ModifyResource</span><span class="p">):</span>
    <span class="n">_endpoints</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;create&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/dataset-core/datasets/</span><span class="si">{dataset_id}</span><span class="s2">/slices/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;delete&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/dataset-core/datasets/</span><span class="si">{dataset_id}</span><span class="s2">/slices/</span><span class="si">{id}</span><span class="s2">/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fetch&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/dataset-query/datasets/</span><span class="si">{dataset_id}</span><span class="s2">/slices/</span><span class="si">{id}</span><span class="s2">/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;paginate&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/dataset-query/datasets/</span><span class="si">{dataset_id}</span><span class="s2">/slices/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;modify&quot;</span><span class="p">:</span> <span class="s2">&quot;/curate/dataset-core/datasets/</span><span class="si">{dataset_id}</span><span class="s2">/slices/</span><span class="si">{id}</span><span class="s2">/&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">_object_type</span> <span class="o">=</span> <span class="s2">&quot;slice&quot;</span>

<div class="viewcode-block" id="Slice.fetch"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Slice.fetch">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_image_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Slice</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches a slice.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id</span>
<span class="sd">            The ID of the dataset to fetch the slice from.</span>
<span class="sd">        id</span>
<span class="sd">            The ID of the slice to fetch.</span>
<span class="sd">            Must provide at least one of ``id`` or ``name``.</span>
<span class="sd">        name</span>
<span class="sd">            The name of the slice to fetch.</span>
<span class="sd">            Must provide at least one of ``id`` or ``name``.</span>
<span class="sd">        include_image_count</span>
<span class="sd">            Whether to include the count of images in the fetched slice.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The fetched slice.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">error</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;Must provide at least one of id or name.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">error</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;Must provide only one of id or name.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">fetch_all</span><span class="p">(</span>
                    <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
                    <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
                    <span class="n">dataset_id</span><span class="o">=</span><span class="n">dataset_id</span><span class="p">,</span>
                    <span class="n">exact</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">},</span>
                    <span class="n">include_image_count</span><span class="o">=</span><span class="n">include_image_count</span><span class="p">,</span>
                <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="c1"># TODO: Fix error message</span>
                <span class="k">raise</span> <span class="n">error</span><span class="o">.</span><span class="n">NotFoundError</span><span class="p">(</span><span class="s2">&quot;Could not find the slice.&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="kc">None</span>

        <span class="n">endpoint_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">dataset_id</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">id</span><span class="p">}</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">include_image_count</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;expand&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;image_count&quot;</span><span class="p">]})</span>

        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">Slice</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">endpoint_params</span><span class="o">=</span><span class="n">endpoint_params</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Slice.fetch_all"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Slice.fetch_all">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch_all</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">exact</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">contains</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_image_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Slice</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches slices that match the provided filters.</span>
<span class="sd">        If filters are not provided, fetches all slices.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id</span>
<span class="sd">            The ID of the dataset to fetch the slices from.</span>
<span class="sd">        exact</span>
<span class="sd">            A dictionary for exact, case-sensitive filtering.</span>
<span class="sd">            Must provide field names as keys and their desired values.</span>
<span class="sd">            Supported fields: ``name``.</span>
<span class="sd">        contains</span>
<span class="sd">            A dictionary for partial, case-sensitive filtering.</span>
<span class="sd">            Must provide field names as keys and their desired values.</span>
<span class="sd">            Supported fields: ``name``.</span>
<span class="sd">        include_image_count</span>
<span class="sd">            Whether to include the count of images in the fetched slice.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            Matching slices.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        NotFoundError</span>
<span class="sd">            When a dataset with the provided ``dataset_id`` does not exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">all_slices</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">fetch_page_iter</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">dataset_id</span><span class="o">=</span><span class="n">dataset_id</span><span class="p">,</span>
            <span class="n">exact</span><span class="o">=</span><span class="n">exact</span><span class="p">,</span>
            <span class="n">contains</span><span class="o">=</span><span class="n">contains</span><span class="p">,</span>
            <span class="n">include_image_count</span><span class="o">=</span><span class="n">include_image_count</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="n">all_slices</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span> <span class="p">[]))</span>
        <span class="k">return</span> <span class="n">all_slices</span></div>

<div class="viewcode-block" id="Slice.fetch_all_iter"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Slice.fetch_all_iter">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch_all_iter</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">exact</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">contains</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_image_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Slice</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterates through slices that match the provided filters.</span>
<span class="sd">        If filters are not provided, iterates through all slices.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id</span>
<span class="sd">            The ID of the dataset to fetch the slices from.</span>
<span class="sd">        exact</span>
<span class="sd">            A dictionary for exact, case-sensitive filtering.</span>
<span class="sd">            Must provide field names as keys and their desired values.</span>
<span class="sd">            Supported fields: ``name``.</span>
<span class="sd">        contains</span>
<span class="sd">            A dictionary for partial, case-sensitive filtering.</span>
<span class="sd">            Must provide field names as keys and their desired values.</span>
<span class="sd">            Supported fields: ``name``.</span>
<span class="sd">        include_image_count</span>
<span class="sd">            Whether to include the count of images in the fetched slice.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The matching slice iterator.</span>

<span class="sd">        Yields</span>
<span class="sd">        -------</span>
<span class="sd">            The next matching slice.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        NotFoundError</span>
<span class="sd">            When a dataset with the provided ``dataset_id`` does not exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">fetch_result</span> <span class="ow">in</span> <span class="n">Slice</span><span class="o">.</span><span class="n">fetch_page_iter</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">dataset_id</span><span class="o">=</span><span class="n">dataset_id</span><span class="p">,</span>
            <span class="n">exact</span><span class="o">=</span><span class="n">exact</span><span class="p">,</span>
            <span class="n">contains</span><span class="o">=</span><span class="n">contains</span><span class="p">,</span>
            <span class="n">include_image_count</span><span class="o">=</span><span class="n">include_image_count</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="k">for</span> <span class="nb">slice</span> <span class="ow">in</span> <span class="n">fetch_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span> <span class="p">[]):</span>
                <span class="k">yield</span> <span class="nb">slice</span></div>

<div class="viewcode-block" id="Slice.fetch_page"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Slice.fetch_page">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch_page</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">exact</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">contains</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_image_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">page</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Slice</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches a page of slices that match the provided filters.</span>
<span class="sd">        If filters are not provided, paginates all slices.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id</span>
<span class="sd">            The ID of the dataset to fetch the slices from.</span>
<span class="sd">        exact</span>
<span class="sd">            A dictionary for exact, case-sensitive filtering.</span>
<span class="sd">            Must provide field names as keys and their desired values.</span>
<span class="sd">            Supported fields: ``name``.</span>
<span class="sd">        contains</span>
<span class="sd">            A dictionary for partial, case-sensitive filtering.</span>
<span class="sd">            Must provide field names as keys and their desired values.</span>
<span class="sd">            Supported fields: ``name``.</span>
<span class="sd">        include_image_count</span>
<span class="sd">            Whether to include the count of images in the fetched slices.</span>
<span class="sd">        page</span>
<span class="sd">            The page number.</span>
<span class="sd">        limit</span>
<span class="sd">            The maximum number of slices in a page.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            A page of matching slices.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        NotFoundError</span>
<span class="sd">            When a dataset with the provided ``dataset_id`` does not exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpoint_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">dataset_id</span><span class="p">}</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="n">limit</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">exact</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">field</span><span class="p">,</span> <span class="nb">filter</span> <span class="ow">in</span> <span class="p">[</span>
                <span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">),</span>
            <span class="p">]:</span>
                <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="nb">filter</span><span class="p">:</span> <span class="n">exact</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field</span><span class="p">)})</span>

        <span class="k">if</span> <span class="n">contains</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">field</span><span class="p">,</span> <span class="nb">filter</span> <span class="ow">in</span> <span class="p">[</span>
                <span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;name_contains&quot;</span><span class="p">),</span>
            <span class="p">]:</span>
                <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="nb">filter</span><span class="p">:</span> <span class="n">contains</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field</span><span class="p">)})</span>

        <span class="k">if</span> <span class="n">include_image_count</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;expand&quot;</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;expand&quot;</span><span class="p">,</span> <span class="p">[])</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;image_count&quot;</span><span class="p">]})</span>

        <span class="k">if</span> <span class="n">page</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;page&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">page</span>

        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">Slice</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span><span class="o">.</span><span class="n">fetch_page</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">endpoint_params</span><span class="o">=</span><span class="n">endpoint_params</span><span class="p">,</span>
            <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Slice.fetch_page_iter"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Slice.fetch_page_iter">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fetch_page_iter</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">exact</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">contains</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_image_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Slice</span><span class="p">]]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterates through pages of slices that match the provided filters.</span>
<span class="sd">        If filters are not provided, paginates all slices.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id</span>
<span class="sd">            The ID of the dataset to fetch the slices from.</span>
<span class="sd">        exact</span>
<span class="sd">            A dictionary for exact, case-sensitive filtering.</span>
<span class="sd">            Must provide field names as keys and their desired values.</span>
<span class="sd">            Supported fields: ``name``.</span>
<span class="sd">        contains</span>
<span class="sd">            A dictionary for partial, case-sensitive filtering.</span>
<span class="sd">            Must provide field names as keys and their desired values.</span>
<span class="sd">            Supported fields: ``name``.</span>
<span class="sd">        include_image_count</span>
<span class="sd">            Whether to include the count of images in the fetched slices.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The matching slice page iterator.</span>

<span class="sd">        Yields</span>
<span class="sd">        -------</span>
<span class="sd">            The next page of matching slices.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        NotFoundError</span>
<span class="sd">            When a dataset with the provided ``dataset_id`` does not exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">page</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">page_result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">limit</span> <span class="o">=</span> <span class="n">FETCH_PAGE_LIMIT</span>

        <span class="k">def</span> <span class="nf">fetch_result</span><span class="p">(</span><span class="n">page</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">page_result</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">fetch_page</span><span class="p">(</span>
                <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
                <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
                <span class="n">dataset_id</span><span class="o">=</span><span class="n">dataset_id</span><span class="p">,</span>
                <span class="n">exact</span><span class="o">=</span><span class="n">exact</span><span class="p">,</span>
                <span class="n">contains</span><span class="o">=</span><span class="n">contains</span><span class="p">,</span>
                <span class="n">include_image_count</span><span class="o">=</span><span class="n">include_image_count</span><span class="p">,</span>
                <span class="n">page</span><span class="o">=</span><span class="n">page</span><span class="p">,</span>
                <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">page_result</span>

        <span class="n">page_result</span> <span class="o">=</span> <span class="n">fetch_result</span><span class="p">(</span><span class="n">page</span><span class="o">=</span><span class="n">page</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">page_result</span>

        <span class="k">while</span> <span class="n">page</span> <span class="o">*</span> <span class="n">limit</span> <span class="o">&lt;</span> <span class="n">page_result</span><span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">]:</span>
            <span class="n">page</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">page_result</span> <span class="o">=</span> <span class="n">fetch_result</span><span class="p">(</span><span class="n">page</span><span class="o">=</span><span class="n">page</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">page_result</span></div>

<div class="viewcode-block" id="Slice.create"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Slice.create">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Slice</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a slice.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id</span>
<span class="sd">            The ID of the dataset to create the slice in.</span>
<span class="sd">        name</span>
<span class="sd">            The name of the slice to create.</span>
<span class="sd">        description</span>
<span class="sd">            The description of the slice to create.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The created slice.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ConflictError</span>
<span class="sd">            When a slice with the provided name already exists in the dataset.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpoint_params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">dataset_id</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">Slice</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">endpoint_params</span><span class="o">=</span><span class="n">endpoint_params</span><span class="p">,</span>
            <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Slice.add_images"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Slice.add_images">[docs]</a>    <span class="k">def</span> <span class="nf">add_images</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">images</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Image</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">image_ids</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">image_keys</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">asynchronous</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Job</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a job that adds images to the slice.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        images</span>
<span class="sd">            Images to add.</span>
<span class="sd">        image_ids</span>
<span class="sd">            IDs of images to add.</span>
<span class="sd">        image_keys</span>
<span class="sd">            Keys of images to add.</span>
<span class="sd">        query</span>
<span class="sd">            A query string to filter the images to add.</span>
<span class="sd">        asynchronous</span>
<span class="sd">            Whether to immediately return the job after creating it.</span>
<span class="sd">            If set to ``False``, the function waits for the job to finish before returning.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The created job.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">images</span> <span class="ow">or</span> <span class="n">image_ids</span> <span class="ow">or</span> <span class="n">image_keys</span><span class="p">)</span> <span class="ow">and</span> <span class="n">query</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">error</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">(</span>
                <span class="s2">&quot;Must provide at least one of query or images|image_ids|image_keys.&quot;</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">images</span> <span class="ow">or</span> <span class="n">image_ids</span> <span class="ow">or</span> <span class="n">image_keys</span><span class="p">)</span> <span class="ow">and</span> <span class="n">query</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">error</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">(</span>
                <span class="s2">&quot;Must provide only one of query or images|image_ids|image_keys.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">query</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset_id</span><span class="p">,</span>
                <span class="s2">&quot;images&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;slice&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="s2">&quot;slices&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;add&quot;</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">],</span> <span class="s2">&quot;remove&quot;</span><span class="p">:</span> <span class="p">[]},</span>
            <span class="p">}</span>
            <span class="n">job</span> <span class="o">=</span> <span class="n">Job</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
                <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
                <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
                <span class="n">job_type</span><span class="o">=</span><span class="n">JobType</span><span class="o">.</span><span class="n">UPDATE_SLICE_BY_QUERY</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">images</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">images</span> <span class="k">else</span> <span class="n">images</span>
            <span class="n">image_ids</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">image_ids</span> <span class="k">else</span> <span class="n">image_ids</span>
            <span class="n">image_keys</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">image_keys</span> <span class="k">else</span> <span class="n">image_keys</span>

            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset_id</span><span class="p">,</span>
                <span class="s2">&quot;images&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;ids&quot;</span><span class="p">:</span> <span class="n">image_ids</span> <span class="o">+</span> <span class="p">[</span><span class="n">image</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">],</span>
                    <span class="s2">&quot;keys&quot;</span><span class="p">:</span> <span class="n">image_keys</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="s2">&quot;slices&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;add&quot;</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">],</span> <span class="s2">&quot;remove&quot;</span><span class="p">:</span> <span class="p">[]},</span>
            <span class="p">}</span>
            <span class="n">job</span> <span class="o">=</span> <span class="n">Job</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
                <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
                <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
                <span class="n">job_type</span><span class="o">=</span><span class="n">JobType</span><span class="o">.</span><span class="n">UPDATE_SLICE</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">asynchronous</span><span class="p">:</span>
            <span class="n">job</span><span class="o">.</span><span class="n">wait_until_complete</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">job</span></div>

<div class="viewcode-block" id="Slice.remove_images"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Slice.remove_images">[docs]</a>    <span class="k">def</span> <span class="nf">remove_images</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">images</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Image</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">image_ids</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">image_keys</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">asynchronous</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Job</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a job that removes images from the slice.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        images</span>
<span class="sd">            Images to remove.</span>
<span class="sd">        image_ids</span>
<span class="sd">            IDs of images to remove.</span>
<span class="sd">        image_keys</span>
<span class="sd">            Keys of images to remove.</span>
<span class="sd">        query</span>
<span class="sd">            A query string to filter the images to remove.</span>
<span class="sd">        asynchronous</span>
<span class="sd">            Whether to immediately return the job after creating it.</span>
<span class="sd">            If set to ``False``, the function waits for the job to finish before returning.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The created job.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">images</span> <span class="ow">or</span> <span class="n">image_ids</span> <span class="ow">or</span> <span class="n">image_keys</span><span class="p">)</span> <span class="ow">and</span> <span class="n">query</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">error</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">(</span>
                <span class="s2">&quot;Must provide at least one of query or images|image_ids|image_keys.&quot;</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">images</span> <span class="ow">or</span> <span class="n">image_ids</span> <span class="ow">or</span> <span class="n">image_keys</span><span class="p">)</span> <span class="ow">and</span> <span class="n">query</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">error</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">(</span>
                <span class="s2">&quot;Must provide only one of query or images|image_ids|image_keys.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">query</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset_id</span><span class="p">,</span>
                <span class="s2">&quot;images&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;slice&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="s2">&quot;slices&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;add&quot;</span><span class="p">:</span> <span class="p">[],</span> <span class="s2">&quot;remove&quot;</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">]},</span>
            <span class="p">}</span>
            <span class="n">job</span> <span class="o">=</span> <span class="n">Job</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
                <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
                <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
                <span class="n">job_type</span><span class="o">=</span><span class="n">JobType</span><span class="o">.</span><span class="n">UPDATE_SLICE_BY_QUERY</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">images</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">images</span> <span class="k">else</span> <span class="n">images</span>
            <span class="n">image_ids</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">image_ids</span> <span class="k">else</span> <span class="n">image_ids</span>
            <span class="n">image_keys</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">image_keys</span> <span class="k">else</span> <span class="n">image_keys</span>

            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset_id</span><span class="p">,</span>
                <span class="s2">&quot;images&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;ids&quot;</span><span class="p">:</span> <span class="n">image_ids</span> <span class="o">+</span> <span class="p">[</span><span class="n">image</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">],</span>
                    <span class="s2">&quot;keys&quot;</span><span class="p">:</span> <span class="n">image_keys</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="s2">&quot;slices&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;add&quot;</span><span class="p">:</span> <span class="p">[],</span> <span class="s2">&quot;remove&quot;</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">]},</span>
            <span class="p">}</span>
            <span class="n">job</span> <span class="o">=</span> <span class="n">Job</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
                <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
                <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
                <span class="n">job_type</span><span class="o">=</span><span class="n">JobType</span><span class="o">.</span><span class="n">UPDATE_SLICE</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">asynchronous</span><span class="p">:</span>
            <span class="n">job</span><span class="o">.</span><span class="n">wait_until_complete</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">job</span></div>

<div class="viewcode-block" id="Slice.delete"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Slice.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes the slice.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpoint_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset_id</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">}</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">Slice</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">endpoint_params</span><span class="o">=</span><span class="n">endpoint_params</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Slice.fetch_images"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Slice.fetch_images">[docs]</a>    <span class="k">def</span> <span class="nf">fetch_images</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_annotations</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Image</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches images from the slice that match the provided filters.</span>
<span class="sd">        If filters are not provided, fetches all images.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        key</span>
<span class="sd">            The key of a specific image to fetch.</span>
<span class="sd">            If provided, only returns at most 1 matching image.</span>
<span class="sd">        query</span>
<span class="sd">            A query string to filter the images to fetch.</span>
<span class="sd">        include_annotations</span>
<span class="sd">            Whether to include annotations in the fetched images.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            Matching images.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        NotFoundError</span>
<span class="sd">            When the slice or the dataset does not exist.</span>
<span class="sd">            This could occur if the slice or the dataset has been deleted.</span>
<span class="sd">        QuerySyntaxError</span>
<span class="sd">            When the provided ``query`` is syntactically incorrect.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">Image</span><span class="o">.</span><span class="n">fetch_all</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">dataset_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset_id</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span>
            <span class="nb">slice</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">include_annotations</span><span class="o">=</span><span class="n">include_annotations</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Slice.fetch_images_iter"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Slice.fetch_images_iter">[docs]</a>    <span class="k">def</span> <span class="nf">fetch_images_iter</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_annotations</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Image</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterates through images in the slice that match the provided filters.</span>
<span class="sd">        If filters are not provided, iterates through all images.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        key</span>
<span class="sd">            The key of a specific image to fetch.</span>
<span class="sd">            If provided, only returns at most 1 matching image.</span>
<span class="sd">        query</span>
<span class="sd">            A query string to filter the images to fetch.</span>
<span class="sd">        include_annotations</span>
<span class="sd">            Whether to include annotations in the fetched images.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The matching image iterator.</span>

<span class="sd">        Yields</span>
<span class="sd">        -------</span>
<span class="sd">            The next matching image.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        NotFoundError</span>
<span class="sd">            When the slice or the dataset does not exist.</span>
<span class="sd">            This could occur if the slice or the dataset has been deleted.</span>
<span class="sd">        QuerySyntaxError</span>
<span class="sd">            When the provided ``query`` is syntactically incorrect.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">Image</span><span class="o">.</span><span class="n">fetch_all_iter</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">dataset_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset_id</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span>
            <span class="nb">slice</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">include_annotations</span><span class="o">=</span><span class="n">include_annotations</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Slice.refresh"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Slice.refresh">[docs]</a>    <span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Refreshes the slice.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpoint_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset_id</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">}</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="s2">&quot;image_count&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;expand&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;image_count&quot;</span><span class="p">]})</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">Slice</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">endpoint_params</span><span class="o">=</span><span class="n">endpoint_params</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Slice.modify"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.Slice.modify">[docs]</a>    <span class="k">def</span> <span class="nf">modify</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Modifies the slice.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        description</span>
<span class="sd">            The new description for the slice.</span>
<span class="sd">        access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpoint_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset_id</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">}</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">description</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">description</span><span class="p">})</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">Slice</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span>
            <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
            <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
            <span class="n">endpoint_params</span><span class="o">=</span><span class="n">endpoint_params</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
            <span class="n">method</span><span class="o">=</span><span class="s2">&quot;patch&quot;</span><span class="p">,</span>
        <span class="p">)</span></div></div>


<div class="viewcode-block" id="create_dataset"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.create_dataset">[docs]</a><span class="k">def</span> <span class="nf">create_dataset</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dataset</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a dataset.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    name</span>
<span class="sd">        The name of the dataset to create.</span>
<span class="sd">    description</span>
<span class="sd">        The description of the dataset to create.</span>
<span class="sd">    access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">        The created dataset.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ConflictError</span>
<span class="sd">        When a dataset with the provided name already exists.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
        <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
    <span class="p">)</span></div>


<div class="viewcode-block" id="fetch_dataset"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.fetch_dataset">[docs]</a><span class="k">def</span> <span class="nf">fetch_dataset</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">include_image_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">include_slice_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dataset</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fetches a dataset.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    id</span>
<span class="sd">        The id of the dataset to fetch.</span>
<span class="sd">        Must provide at least one of ``id`` or ``name``.</span>
<span class="sd">    name</span>
<span class="sd">        The name of the dataset to fetch.</span>
<span class="sd">        Must provide at least one of ``id`` or ``name``.</span>
<span class="sd">    include_image_count</span>
<span class="sd">        Whether to include the count of images in the fetched dataset.</span>
<span class="sd">    include_slice_count</span>
<span class="sd">        Whether to include the count of slices in the fetched dataset.</span>
<span class="sd">    access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">        The fetched dataset.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span>
        <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
        <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
        <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">include_image_count</span><span class="o">=</span><span class="n">include_image_count</span><span class="p">,</span>
        <span class="n">include_slice_count</span><span class="o">=</span><span class="n">include_slice_count</span><span class="p">,</span>
    <span class="p">)</span></div>


<div class="viewcode-block" id="fetch_datasets"><a class="viewcode-back" href="../../../source/spb_curate.curate.html#spb_curate.curate.api.fetch_datasets">[docs]</a><span class="k">def</span> <span class="nf">fetch_datasets</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">team_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">exact</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">contains</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">include_image_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">include_slice_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dataset</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fetches datasets that match the provided filters.</span>
<span class="sd">    If filters are not provided, fetches all datasets.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    exact</span>
<span class="sd">        A dictionary for exact, case-sensitive filtering.</span>
<span class="sd">        Must provide field names as keys and their desired values.</span>
<span class="sd">        Supported fields: ``name``.</span>
<span class="sd">    contains</span>
<span class="sd">        A dictionary for partial, case-sensitive filtering.</span>
<span class="sd">        Must provide field names as keys and their desired values.</span>
<span class="sd">        Supported fields: ``name``.</span>
<span class="sd">    include_image_count</span>
<span class="sd">        Whether to include the count of images in the fetched datasets.</span>
<span class="sd">    include_slice_count</span>
<span class="sd">        Whether to include the count of slices in the fetched datasets.</span>
<span class="sd">    access_key</span>
<span class="sd">            An access key for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>
<span class="sd">        team_name</span>
<span class="sd">            A team name for request authentication.</span>
<span class="sd">            If provided, overrides the configuration.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">        Matching datasets.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">fetch_all</span><span class="p">(</span>
        <span class="n">access_key</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
        <span class="n">team_name</span><span class="o">=</span><span class="n">team_name</span><span class="p">,</span>
        <span class="n">exact</span><span class="o">=</span><span class="n">exact</span><span class="p">,</span>
        <span class="n">contains</span><span class="o">=</span><span class="n">contains</span><span class="p">,</span>
        <span class="n">include_image_count</span><span class="o">=</span><span class="n">include_image_count</span><span class="p">,</span>
        <span class="n">include_slice_count</span><span class="o">=</span><span class="n">include_slice_count</span><span class="p">,</span>
    <span class="p">)</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2023, Superb AI.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>